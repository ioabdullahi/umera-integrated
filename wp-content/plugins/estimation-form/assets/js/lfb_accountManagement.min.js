!function(b){"use strict";var p=!1;function t(){var a=jQuery("#lfb_manEmailPass").val(),t=!1;jQuery("#lfb_manEmailPass").closest(".form-group").removeClass("has-error"),_(a)||(jQuery("#lfb_manEmailPass").closest(".form-group").addClass("has-error"),t=!0),t||jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_forgotPassManD",email:a},success:function(a){"1"==(a=a.trim())?(jQuery("#lfb_winPass").find(".form-group,a.btn").hide(),jQuery("#lfb_winPass").find("#lfb_passLostConfirmation").show(),setTimeout(function(){jQuery("#lfb_winPass").modal("hide"),jQuery("#lfb_winPass").find("#lfb_passLostConfirmation").hide(),jQuery("#lfb_winPass").find(".form-group,a.btn").show()},3e3)):jQuery("#lfb_manEmailPass").closest(".form-group").addClass("has-error")}})}function n(){var a=b("#lfb_custAccountLoginPanel").find('[name="email"]').val(),t=b("#lfb_custAccountLoginPanel").find('[name="pass"]').val(),n=!1;b("#lfb_custAccountLoginPanel").find(".has-error").removeClass("has-error"),_(a)||(n=!0,b("#lfb_custAccountLoginPanel").find('[name="email"]').closest(".form-group").addClass("has-error")),t.length<4&&(n=!0,b("#lfb_custAccountLoginPanel").find('[name="pass"]').closest(".form-group").addClass("has-error")),n||jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_loginCustomer",email:a,pass:t},success:function(a){1==a.trim()?document.location.href=document.location.href:(b("#lfb_custAccountLoginPanel").find('[name="email"]').closest(".form-group").addClass("has-error"),b("#lfb_custAccountLoginPanel").find('[name="pass"]').closest(".form-group").addClass("has-error"))}})}function _(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}function r(a,t,n,s,o,e,l){var r=(a=a||0).toString(),i=o,o=r=parseFloat(a).toFixed(2).toString(),a=e,e=l,l="";return-1<r.indexOf(".")?(o=r.substr(0,r.indexOf(".")),l=r.substr(r.indexOf(".")+1,2),r=r.replace(".",s),1==l.toString().length&&(l=l.toString()+"0"),9<o.length?r=o.substr(0,o.length-9)+e+o.substr(o.length-9,3)+a+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length)+s+l:6<o.length?r=o.substr(0,o.length-6)+a+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length)+s+l:3<o.length&&(r=o.substr(0,o.length-3)+i+o.substr(o.length-3,o.length)+s+l)):9<o.length?r=o.substr(0,o.length-9)+e+o.substr(o.length-9,3)+a+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length):6<o.length?r=o.substr(0,o.length-6)+a+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length):3<o.length&&(r=o.substr(0,o.length-3)+i+o.substr(o.length-3,o.length)),r="left"==n?t.toString()+r.toString():r.toString()+t.toString()}function s(){b("#lfb_delDataForm").slideUp();var a=!1,t=b("#lfb_accountInfosPanel").find('[name="email"]').val().trim(),n=b("#lfb_accountInfosPanel").find('[name="firstName"]').val().trim(),s=b("#lfb_accountInfosPanel").find('[name="lastName"]').val().trim(),o=b("#lfb_accountInfosPanel").find('[name="phone"]').val().trim(),e=b("#lfb_accountInfosPanel").find('[name="phoneJob"]').val().trim(),l=b("#lfb_accountInfosPanel").find('[name="job"]').val().trim(),r=b("#lfb_accountInfosPanel").find('[name="company"]').val().trim(),i=b("#lfb_accountInfosPanel").find('[name="url"]').val().trim(),c=b("#lfb_accountInfosPanel").find('[name="address"]').val().trim(),d=b("#lfb_accountInfosPanel").find('[name="city"]').val().trim(),f=b("#lfb_accountInfosPanel").find('[name="state"]').val().trim(),u=(b("#lfb_accountInfosPanel").find('[name="country"]').val().trim(),b("#lfb_accountInfosPanel").find('[name="zip"]').val().trim());p&&clearTimeout(p),b("#lfb_accountInfosPanel").find(".has-error").removeClass("has-error");var m=!1;_(t)||(a=!0,b("#lfb_accountInfosPanel").find('[name="email"]').closest(".form-group").addClass("has-error"),m=b("#lfb_accountInfosPanel").find('[name="email"]')),n.length<3&&(a=!0,b("#lfb_accountInfosPanel").find('[name="firstName"]').closest(".form-group").addClass("has-error"),m=m||b("#lfb_accountInfosPanel").find('[name="firstName"]')),s.length<3&&(a=!0,b("#lfb_accountInfosPanel").find('[name="lastName"]').closest(".form-group").addClass("has-error"),m=m||b("#lfb_accountInfosPanel").find('[name="lastName"]')),a?jQuery("body,html").animate({scrollTop:m.offset().top-80},250):(b('#lfb_custAccountPanel a[data-action="saveCustomerInfos"] span.fas').removeClass("fa-save").addClass("fa-spinner"),jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_saveCustomerInfos",email:t,firstName:n,lastName:s,phone:o,phoneJob:e,job:l,company:r,url:i,address:c,city:d,state:f,zip:u},success:function(a){b('#lfb_custAccountPanel a[data-action="saveCustomerInfos"] span.fas').removeClass("fa-spinner").addClass("fa-check"),p=setTimeout(function(){b('#lfb_custAccountPanel a[data-action="saveCustomerInfos"] span.fas').removeClass("fa-check").addClass("fa-save")},2e3)}}))}function o(){jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_confirmDeleteData"},success:function(a){jQuery("#lfb_delDataForm a.btn").hide(),jQuery("#lfb_delDataForm").find(".alert").html('<p style="text-align: center;" class="lfb_text-mainColor">'+lfb_dataCust.txtCustomersDataModifyValidConfirm+"</p>")}})}function e(){jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_downloadDataMan"},success:function(a){a=a.trim();var t=window.open("");t.document.write(a.replace(/\\\\n/g,"\n")),t.focus()}})}function l(){jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_manSignOut"},success:function(a){document.location.href=document.location.href}})}b(document).ready(function(){var a;b("#lfb_custAccountLoginPanel").find('a[data-action="loginCustAccount"]').on("click",n),b("#lfb_custAccountForgotPassLink").on("click",function(){b("#lfb_winPass .has-error").removeClass("has-error"),b("#lfb_winPass").modal("show");var a=b('#lfb_custAccountLoginPanel [name="email"]').val();_(a)?b("#lfb_winPass #lfb_manEmailPass").val(a):b("#lfb_winPass #lfb_manEmailPass").val("")}),0<lfb_dataCust.customerID?(jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_loadCustomerOrders"},success:function(a){var t=JSON.parse(a);b("#lfb_customerOrdersTable tbody").html("");for(var n=0;n<t.length;n++){var s=t[n],o=r(s.totalPrice,s.currency,s.currencyPosition,s.decimalsSeparator,s.thousandsSeparator,s.millionSeparator,s.billionsSeparator),e=r(s.totalSubscription,s.currency,s.currencyPosition,s.decimalsSeparator,s.thousandsSeparator,s.millionSeparator,s.billionsSeparator),l=b('<tr data-id="'+s.id+'"></tr>');l.append("<td>"+s.dateLog+"</td>"),l.append('<td class="text-right">'+e+"</td>"),l.append('<td class="text-right">'+o+"</td>"),l.append("<td>"+s.statusText+"</td>"),l.append('<td class="lfb_actionTh"></td>'),1==s.contentUser&&l.find(".lfb_actionTh").append('<a href="javascript:" data-action="viewOrder" title="'+lfb_dataCust.customersAc_viewOrder+'" class="btn btn-default btn-circle" data-toggle="tooltip" data-placement="bottom"><span class="fa fa-eye"></span></a><a href="javascript:" data-action="downloadOrder" title="'+lfb_dataCust.customersAc_downloadOrder+'" class="btn btn-default btn-circle" data-toggle="tooltip" data-placement="bottom"><span class="fa fa-file-download"></span></a></td>'),b("#lfb_customerOrdersTable tbody").append(l),l.find('[data-toggle="tooltip"]').tooltip({container:"#lfb_form.lfb_customerAccount",placement:"top"}),l.find('a[data-action="viewOrder"]').on("click",function(){var a;b(".tooltip").remove(),b("#lfb_delDataForm").slideUp(),a=b(this).closest("tr").attr("data-id"),jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_viewCustomerOrder",orderID:a},success:function(a){b("#lfb_viewFormPanel").html(a),b("#lfb_viewFormModal").modal("show"),b("#lfb_viewFormPanel [bgcolor]").each(function(){b(this).css({backgroundColor:b(this).attr("bgcolor")})}),b("#lfb_viewFormPanel [bordercolor]").each(function(){b(this).css({border:"1px solid "+b(this).attr("bordercolor")})})}})}),l.find('a[data-action="downloadOrder"]').on("click",function(){var a;b("#lfb_delDataForm").slideUp(),b(".tooltip").remove(),a=b(this).closest("tr").attr("data-id"),b(".tooltip").remove(),jQuery.ajax({url:lfb_dataCust.ajaxurl,type:"post",data:{action:"lfb_downloadCustomerOrder",orderID:a},success:function(a){var t;1==a.trim()?"null"!=typeof(t=window.open(lfb_dataCust.homeUrl+"/index.php?EPFormsBuilder=downloadMyOrder","_blank"))&&null!=t&&(b(".tooltip").remove(),t.focus(),setTimeout(function(){b(".tooltip").remove(),t.close()},300)):b('#lfb_customerOrdersTable tbody [data-action="downloadOrder"]').remove()}})})}}}),b('#lfb_form.lfb_customerAccount [data-toggle="tooltip"]').tooltip({}),b('#lfb_custAccountPanel a[data-action="saveCustomerInfos"]').on("click",s),b('#lfb_custAccountPanel a[data-action="deleteCustomerData"]').on("click",function(){b("#lfb_delDataForm").slideDown()}),b('#lfb_custAccountPanel a[data-action="confirmDeleteCustomerData"]').on("click",o),b('#lfb_custAccountPanel a[data-action="downloadCustomerData"]').on("click",e),b('a[data-action="leaveAccount"]').on("click",l)):((a=b('<div class="modal fade" id="lfb_winPass" tabindex="-1" role="dialog" aria-hidden="true"></div>')).append('<div class="modal-dialog  modal-sm"><div class="modal-content"><div class="modal-header"></div><div class="modal-body"></div></div></div>'),a.find(".modal-header").append('<h4 class="modal-title m-0"><i class="fas fa-lock-open"></i>'+lfb_dataCust.txtCustomersDataForgotPassLink+'</h4><a href="javascript:" class="close" data-dismiss="modal" aria-label="Close"><span class="fas fa-times"></span></a>'),a.find(".modal-body").append('<div class="form-group"><div class="input-group"><div class="input-group-addon"><span class="far fa-envelope"></span></div><input type="text" class="form-control" id="lfb_manEmailPass" placeholder="'+lfb_dataCust.customersDataLabelEmail+'"></div></div>'),a.find(".modal-body").append('<a href="javascript:" data-action="sendPass"  class="btn btn-primary"><span class="far fa-envelope"></span>'+lfb_dataCust.txtCustomersDataForgotPassLink+"</a>"),a.find(".modal-body").append('<p id="lfb_passLostConfirmation"  style="text-align: center;"><span class="fas fa-check"></span><br/>'+lfb_dataCust.txtCustomersDataForgotPassSent+"</p>"),b("#lfb_form").append(a),b("#lfb_winPass").find("#lfb_passLostConfirmation").hide(),a.find('a[data-action="sendPass"]').on("click",t),b("#lfb_winPass .close").on("click",function(){b("#lfb_winPass").modal("hide")}))})}(jQuery);